{"version":3,"sources":["../../server/controllers/controller.js"],"names":["controller","get","req","res","send","getRides","json","rides","getSpecificRide","success","forEach","element","rideID","params","rideId","status","message","postRequest","request","body","hasRequesterID","Object","prototype","hasOwnProperty","call","hasDestination","addRequest","postRide","ride","hasOrigin","hasTime","hasAllowStops","hasAvaliableSpace","hasDescription","push","Ride","users","userID","origin","destination","time","allowStops","avaliableSpace","description","length"],"mappings":"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","file":"controller.js","sourcesContent":["import rides from '../model/ridesmodel';\r\nimport users from '../model/usersmodel';\r\nimport Ride from '../model/classes/ride';\r\n\r\nconst controller = {\r\n  get: (req, res) => {\r\n    res.send('Server is running, kindly use the endpoints. /api/v1/rides, /api/v1/rides/:rideId, /api/v1/rides, /api/v1/rides/:rideId/requests');\r\n  },\r\n\r\n  getRides: (req, res) => {\r\n    res.json(rides);\r\n  },\r\n\r\n  getSpecificRide: (req, res) => {\r\n    let success = false;\r\n    rides.forEach((element) => {\r\n      if (element.rideID === req.params.rideId) {\r\n        success = true;\r\n        res.json(element);\r\n      }\r\n    });\r\n\r\n    if (!success) {\r\n      res.status(404);\r\n      res.json({\r\n        status: 'fail',\r\n        message: 'Information not found. Perhaps try to get the avaliable rides first and select an ID.',\r\n      });\r\n    }\r\n  },\r\n\r\n  postRequest: (req, res) => {\r\n    const request = req.body;\r\n    const hasRequesterID = Object.prototype.hasOwnProperty.call(request, 'requesterID');\r\n    const hasDestination = Object.prototype.hasOwnProperty.call(request, 'destination');\r\n\r\n    if (hasRequesterID && hasDestination) {\r\n      rides.forEach((element) => {\r\n        if (element.rideID === req.params.rideId) {\r\n          element.addRequest(request);\r\n        }\r\n      });\r\n      res.json(rides);\r\n    } else {\r\n      res.status(400);\r\n      res.json({\r\n        status: 'fail',\r\n        message: 'Invalid data.',\r\n      });\r\n    }\r\n  },\r\n\r\n  postRide: (req, res) => {\r\n    const ride = req.body;\r\n    const hasOrigin = Object.prototype.hasOwnProperty.call(ride, 'origin');\r\n    const hasDestination = Object.prototype.hasOwnProperty.call(ride, 'destination');\r\n    const hasTime = Object.prototype.hasOwnProperty.call(ride, 'time');\r\n    const hasAllowStops = Object.prototype.hasOwnProperty.call(ride, 'allowStops');\r\n    const hasAvaliableSpace = Object.prototype.hasOwnProperty.call(ride, 'avaliableSpace');\r\n    const hasDescription = Object.prototype.hasOwnProperty.call(ride, 'description');\r\n\r\n    if (hasOrigin && hasDestination && hasTime && hasAllowStops &&\r\n      hasAvaliableSpace && hasDescription) {\r\n      rides.push(new Ride(users[0].userID, ride.origin, ride.destination, ride.time, ride.allowStops, ride.avaliableSpace, ride.description));\r\n      res.json(rides[rides.length - 1]);\r\n    } else {\r\n      res.status(400);\r\n      res.json({\r\n        status: 'fail',\r\n        message: 'The information you provided doesn\\'t conform.',\r\n      });\r\n    }\r\n  },\r\n};\r\n\r\nexport default controller;\r\n"]}